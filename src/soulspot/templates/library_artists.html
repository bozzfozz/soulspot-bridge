{# Hey future me - Artists browse page!
   Shows all artists as cards with avatar (first letter), album count, track count.
   Client-side search filter with debounce. Cards link to artist detail page. #}

{% extends "base.html" %}

{% block title %}Artists - SoulSpot{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav style="margin-bottom: var(--space-4);">
    <ol style="display: flex; align-items: center; gap: var(--space-2); font-size: var(--font-size-sm);">
        <li><a href="/ui/library" style="color: var(--accent-primary);">Library</a></li>
        <li style="color: var(--text-muted);"><i class="fa-solid fa-chevron-right" style="font-size: 0.6rem; margin: 0 var(--space-2);"></i>Artists</li>
    </ol>
</nav>

<!-- Page Header -->
<div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-6); flex-wrap: wrap; gap: var(--space-4);">
    <div style="display: flex; align-items: center; gap: var(--space-4);">
        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #a855f7, #7c3aed); border-radius: var(--radius-xl); display: flex; align-items: center; justify-content: center;">
            <i class="fa-solid fa-user" style="color: white; font-size: 1.25rem;"></i>
        </div>
        <div>
            <h1 style="font-size: var(--font-size-3xl); margin-bottom: var(--space-1);">Artists</h1>
            <p style="color: var(--text-muted); font-size: var(--font-size-sm);">Browse {{ artists|length }} artists in your library</p>
        </div>
    </div>
    <div>
        <input type="text" 
               id="artist-search"
               placeholder="Search artists..."
               class="form-input"
               style="min-width: 220px;">
    </div>
</div>

<!-- Artists Grid -->
<div id="artists-list">
    {% if artists %}
    <div class="artists-grid">
        {% for artist in artists %}
        <a href="/ui/library/artists/{{ artist.name|urlencode }}" class="artist-card">
            <div class="artist-avatar" style="background: linear-gradient(135deg, #a855f7, #7c3aed);">
                {{ artist.name[0]|upper }}
            </div>
            <h3 class="artist-name" title="{{ artist.name }}">{{ artist.name }}</h3>
            <div class="artist-stats">
                <span>{{ artist.album_count }} album{{ 's' if artist.album_count != 1 else '' }}</span>
                <span>{{ artist.track_count }} track{{ 's' if artist.track_count != 1 else '' }}</span>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">
            <i class="fa-solid fa-user"></i>
        </div>
        <h3>No artists found</h3>
        <p>Your library does not contain any artists yet. Import some playlists to get started!</p>
        <a href="/ui/playlists/import" class="btn btn-primary">
            <i class="fa-solid fa-plus"></i>
            Import Playlist
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_scripts %}
<style>
    .artists-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: var(--space-4);
    }
    .artist-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--space-6);
        text-align: center;
        text-decoration: none;
        color: var(--text-primary);
        transition: transform var(--transition-fast), box-shadow var(--transition-fast);
    }
    .artist-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-xl);
    }
    .artist-avatar {
        width: 80px;
        height: 80px;
        margin: 0 auto var(--space-4);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-3xl);
        font-weight: var(--font-weight-bold);
        color: white;
        transition: transform var(--transition-fast);
    }
    .artist-card:hover .artist-avatar {
        transform: scale(1.1);
    }
    .artist-name {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-bold);
        margin-bottom: var(--space-2);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .artist-card:hover .artist-name {
        color: #a855f7;
    }
    .artist-stats {
        display: flex;
        flex-direction: column;
        gap: var(--space-1);
        font-size: var(--font-size-sm);
        color: var(--text-muted);
    }
    .empty-state {
        background: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--space-12);
        text-align: center;
    }
    .empty-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto var(--space-4);
        background: var(--bg-tertiary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--font-size-3xl);
        color: var(--text-muted);
    }
    .empty-state h3 {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-bold);
        margin-bottom: var(--space-2);
    }
    .empty-state p {
        color: var(--text-muted);
        margin-bottom: var(--space-6);
    }
</style>
<script>
// Hey future me - simple client-side search. Filters artist cards by name.
// Uses debounce to avoid too many DOM operations on fast typing.
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('artist-search');
    if (searchInput) {
        let debounceTimer;
        searchInput.addEventListener('input', function(e) {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                const searchTerm = e.target.value.toLowerCase();
                const artistCards = document.querySelectorAll('.artist-card');
                
                artistCards.forEach(card => {
                    const artistName = card.querySelector('.artist-name').textContent.toLowerCase();
                    card.style.display = artistName.includes(searchTerm) ? '' : 'none';
                });
            }, 200);
        });
    }
});
</script>
{% endblock %}
