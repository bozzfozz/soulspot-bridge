{% extends "base.html" %}

{% block title %}Playlists - SoulSpot{% endblock %}

{% block content %}
<div class="space-y-8">

    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
        <div>
            <h1 class="text-4xl font-bold mb-2 text-gradient">Your Playlists</h1>
            <p class="text-muted">Manage and sync your music collection</p>
        </div>
        <a href="/playlists/import" class="btn btn-primary shadow-lg glow-on-hover">
            <i class="fa-solid fa-plus"></i>
            <span>Import Playlist</span>
        </a>
    </div>

    <!-- Playlists Grid -->
    <div class="grid-cols-3" id="playlists-grid">
        {% if playlists %}
        {% for playlist in playlists %}
        <div class="card group hover:scale-[1.02] transition-all duration-300">
            <!-- Cover Art / Placeholder -->
            <div
                class="aspect-square rounded-lg bg-gradient-to-br from-gray-800 to-gray-900 mb-4 relative overflow-hidden shadow-inner">
                {% if playlist.cover_url %}
                <img src="{{ playlist.cover_url }}" alt="{{ playlist.name }}"
                    class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                {% else %}
                <div
                    class="absolute inset-0 flex items-center justify-center text-gray-700 group-hover:text-primary transition-colors">
                    <i class="fa-solid fa-music text-4xl"></i>
                </div>
                {% endif %}

                <!-- Hover Overlay -->
                <div
                    class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3 backdrop-blur-sm">
                    <a href="/ui/playlists/{{ playlist.id }}"
                        class="btn-icon bg-white text-black hover:scale-110 transition-transform" title="View">
                        <i class="fa-solid fa-play"></i>
                    </a>
                    <button class="btn-icon bg-white/20 text-white hover:bg-white hover:text-black transition-colors"
                        hx-post="/api/playlists/{{ playlist.id }}/sync" hx-swap="none" title="Sync">
                        <i class="fa-solid fa-rotate"></i>
                    </button>
                </div>
            </div>

            <!-- Info -->
            <div>
                <h3 class="font-bold text-lg mb-1 truncate group-hover:text-primary transition-colors">
                    {{ playlist.name }}
                </h3>
                <div class="flex items-center justify-between text-sm text-muted">
                    <span>{{ playlist.track_count or 0 }} tracks</span>
                    <span class="px-2 py-0.5 rounded-full bg-white/5 text-xs border border-white/10">
                        {{ playlist.source|upper }}
                    </span>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <!-- Empty State -->
        <div class="col-span-3">
            <div class="glass-panel p-12 text-center">
                <div class="w-20 h-20 bg-card rounded-full flex items-center justify-center mx-auto mb-6 text-muted">
                    <i class="fa-solid fa-music text-3xl"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">No playlists yet</h2>
                <p class="text-muted mb-8 max-w-md mx-auto">Import your first playlist from Spotify to start building
                    your offline library.</p>
                <a href="/playlists/import" class="btn btn-primary btn-lg">
                    Import Playlist
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}