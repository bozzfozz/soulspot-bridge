# =============================================================================
# SoulSpot Bridge - Environment Configuration (Local Setup)
# =============================================================================
# Copy this file to .env and adjust the values for your local environment

# -----------------------------------------------------------------------------
# Docker Configuration (for Docker Compose deployment)
# -----------------------------------------------------------------------------
# User and Group IDs for file permissions
PUID=1000
PGID=1000
UMASK=002

# Timezone (e.g., Europe/Berlin, America/New_York, UTC)
TZ=Europe/Berlin

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=SoulSpot Bridge
DEBUG=true
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-me-to-a-random-secret-key

# -----------------------------------------------------------------------------
# Database Configuration (SQLite)
# -----------------------------------------------------------------------------
# For Docker: sqlite+aiosqlite:///config/soulspot.db
# For local development: sqlite+aiosqlite:///./soulspot.db
DATABASE_URL=sqlite+aiosqlite:///./soulspot.db

# -----------------------------------------------------------------------------
# slskd Configuration
# -----------------------------------------------------------------------------
# slskd should be running on the host machine, not in Docker
# For Docker Compose (accessing host): http://host.docker.internal:5030
# For local development: http://localhost:5030
SLSKD_BASE_URL=http://localhost:5030
SLSKD_URL=http://localhost:5030
SLSKD_USERNAME=admin
SLSKD_PASSWORD=changeme
SLSKD_API_KEY=

# -----------------------------------------------------------------------------
# Spotify Configuration (OAuth PKCE)
# -----------------------------------------------------------------------------
# Get these from: https://developer.spotify.com/dashboard
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=
# For Docker: http://127.0.0.1:8765/api/v1/auth/callback
# For local development: http://localhost:8000/api/v1/auth/callback
SPOTIFY_REDIRECT_URI=http://localhost:8000/api/v1/auth/callback

# -----------------------------------------------------------------------------
# MusicBrainz Configuration
# -----------------------------------------------------------------------------
MUSICBRAINZ_APP_NAME=SoulSpot-Bridge
MUSICBRAINZ_APP_VERSION=0.1.0
MUSICBRAINZ_CONTACT=

# -----------------------------------------------------------------------------
# Last.fm Configuration
# -----------------------------------------------------------------------------
# Get these from: https://www.last.fm/api/account/create
LASTFM_API_KEY=
LASTFM_API_SECRET=

# -----------------------------------------------------------------------------
# File Storage
# -----------------------------------------------------------------------------
# For Docker (container paths): /downloads, /music, /config/artwork, /config/tmp
# For local development: use relative or absolute local paths
DOWNLOAD_PATH=./downloads
MUSIC_PATH=./music
ARTWORK_PATH=./artwork
TEMP_PATH=./tmp

# Storage paths using double underscore notation (alternative)
# STORAGE__DOWNLOAD_PATH=/downloads
# STORAGE__MUSIC_PATH=/music
# STORAGE__ARTWORK_PATH=/config/artwork
# STORAGE__TEMP_PATH=/config/tmp

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
# For Docker: 8765
# For local development: 8000
API_PORT=8000
API_WORKERS=1

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:8000,http://localhost:3000
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Observability Configuration
# -----------------------------------------------------------------------------
# Logging
OBSERVABILITY__LOG_JSON_FORMAT=false  # Plain text logs for local development

# Health Checks
OBSERVABILITY__ENABLE_DEPENDENCY_HEALTH_CHECKS=true
OBSERVABILITY__HEALTH_CHECK_TIMEOUT=5.0

# Circuit Breaker (Resilience for External Services)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5      # Failures before opening circuit
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2      # Successes to close circuit
CIRCUIT_BREAKER_TIMEOUT=60.0             # Seconds in OPEN before testing recovery
CIRCUIT_BREAKER_RESET_TIMEOUT=300.0      # Seconds before resetting failure counter
